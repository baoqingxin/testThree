<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            border: 0;
            overflow: hidden;
        }
    </style>
    <!-- <script src="https://cdn.bootcdn.net/ajax/libs/three.js/0.166.1/three.module.js"></script>
    
    <script src="https://cdn.bootcdn.net/ajax/libs/oimo/1.0.9/oimo.js"></script> -->

    <!-- <script src="https://threejs.org/build/three.module.js"></script>
    <script src="https://threejs.org/examples/jsm/postprocessing/EffectComposer.js"></script>
    <script src="https://threejs.org/examples/jsm/postprocessing/RenderPass.js"></script>
    <script src="https://threejs.org/examples/jsm/postprocessing/GlitchPass.js"></script>
    <script src="https://threejs.org/examples/jsm/postprocessing/OutputPass.js"></script> -->
</head>
<body>
    <div id="container"></div>
    <script type="importmap">
        {
            "imports": {
                "three": "/node_modules/three/build/three.module.js",
                "three/addons/": "/node_modules/three/examples/jsm/postprocessing/"
            }
        }
    </script>
    <script type="module">
        import * as THREE from 'three'
        import { EffectComposer } from 'three/addons/EffectComposer.js'
        import { RenderPass } from 'three/addons/RenderPass.js'
        import { GlitchPass } from 'three/addons/GlitchPass.js'
        import { OutputPass } from 'three/addons/OutputPass.js'

        let camera, scene, renderer, composer;
        let object, light;

        let glitchPass;

        init();

        function init() {
            renderer = new THREE.WebGLRenderer()
            renderer.setPixelRatio(window.devicePixelRatio)
            renderer.setSize(window.innerWidth, window.innerHeight)
            renderer.setAnimationLoop(animate)
            document.body.appendChild(renderer.domElement)

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)
            camera.position.z = 400

            scene = new THREE.Scene()
            scene.fog = new THREE.Fog(0x000000, 1, 1000)

            object = new THREE.Object3D()

            scene.add(object)

            const geometry = new THREE.SphereGeometry(1, 4, 4)

            for (let i = 0; i < 100; i++) {
                const material = new THREE.MeshPhongMaterial({ color: 0xffffff * Math.random(), flatShading: true })

                const mesh = new THREE.Mesh(geometry, material)

                mesh.position.set( Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5 ).normalize();
                mesh.position.multiplyScalar( Math.random() * 400 );
                mesh.rotation.set( Math.random() * 2, Math.random() * 2, Math.random() * 2 );
                mesh.scale.x = mesh.scale.y = mesh.scale.z = Math.random() * 50;
                object.add( mesh );
            }

            scene.add(new THREE.AmbientLight(0xcccccc))
            light = new THREE.DirectionalLight(0xffffff, 3);
            light.position.set(1, 1,1);
            scene.add(light);

            composer = new EffectComposer( renderer );
            composer.addPass( new RenderPass( scene, camera ) );

            glitchPass = new GlitchPass();
            composer.addPass(glitchPass);

            glitchPass.goWild = true

            const outputPass = new OutputPass();
            composer.addPass(outputPass);

            window.addEventListener('resize', onWindowResize);

        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize( window.innerWidth, window.innerHeight );
            composer.setSize( window.innerWidth, window.innerHeight );
        }

        
        function animate() {
            object.rotation.y += 0.01;
            object.rotation.x += 0.005;

            composer.render()
        }

        function init1000 () {
            console.log(window.THREE)
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 100000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('container').appendChild(renderer.domElement);
            camera.position.set(0, 15, 25)
            scene.fog = new THREE.Fog(0xffffff, 0, 500)

            const light = new THREE.DirectionalLight(0xffffff, 1);
            light.position.set(0, 20, 10);
            scene.add(light);
            const light2 = new THREE.HemisphereLight(0xffffbb, 0x080820, 1);
            scene.add(light2);

            new THREE.OrbitControls(camera, renderer.domElement);
        }
        
    </script>
</body>
</html>